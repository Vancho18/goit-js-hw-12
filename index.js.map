{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n// axios Settings\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst myApiKey = '49354290-35d6e1dc5d842ed86975730ff';\nconst axiosOptions = (key, page) => {\n  const params = {\n    params: {\n      key: myApiKey,\n      q: key,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: page,\n    },\n  };\n  return params;\n};\n\nexport async function apiRequest(requestKey, page) {\n  const response = await axios.get('', axiosOptions(requestKey, page));\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst simpleGallery = new SimpleLightbox('.item a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 1000,\n});\n\nexport function renderRequest(arr, link) {\n  const markup = arr\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n    <li class= \"item\">\n      <a href=\"${largeImageURL}\">\n        <img class= \"item-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        <div class = \"item-descrp\">\n          <table>\n            <tr>\n              <th>Likes</th>\n              <th>Views</th>\n              <th>Comment</th>\n              <th>Downloads</th>\n            </tr>\n            <tr>\n              <td>${likes}</td>\n              <td>${views}</td>\n              <td>${comments}</td>\n              <td>${downloads}</td>\n            </tr>\n          </table>\n        </div>\n      </a>\n    </li>\n    `;\n      }\n    )\n    .join('');\n  link.insertAdjacentHTML('beforeend', markup);\n  const images = document.querySelectorAll('.item-img');\n  images.forEach(img => (img.onload = () => img.classList.add('loaded')));\n  simpleGallery.refresh();\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  if (gallery) {\n    gallery.replaceChildren();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { apiRequest } from './js/pixabay-api';\nimport { clearGallery, renderRequest } from './js/render-functions';\nconst userForm = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\n\nfunction activeLoadBtn() {\n  loadBtn.classList.add('active');\n}\nfunction disableLoadBtn() {\n  loadBtn.classList.remove('active');\n}\n\nlet page = 1;\nlet gUserRequest = null;\nlet countOfPages = null;\n\nconst elemLoader = document.querySelector('.loader');\nfunction startLoader() {\n  elemLoader.classList.add('active');\n}\nfunction stopLoader() {\n  elemLoader.classList.remove('active');\n}\n\nconst formReset = () => userForm.reset();\n\nuserForm.addEventListener('submit', processingUserRequest);\n\nasync function processingUserRequest(event) {\n  event.preventDefault();\n  disableLoadBtn();\n  clearGallery();\n  page = 1;\n  countOfPages = 1;\n  const userRequest = userForm\n    .querySelector('[name=\"search-text\"]')\n    .value.trim();\n  if (userRequest !== '') {\n    gUserRequest = userRequest;\n    startLoader();\n    try {\n      const response = await apiRequest(userRequest, page);\n      if (response.hits.length !== 0) {\n        stopLoader();\n        if (response.totalHits > 15) {\n          countOfPages = response.totalHits / 15;\n          activeLoadBtn();\n        } else {\n          disableLoadBtn();\n        }\n        renderRequest(response.hits, gallery);\n        return;\n      } else {\n        stopLoader();\n        iziToast.warning({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'center',\n        });\n        return;\n      }\n    } catch (error) {\n      iziToast.error({\n        message: `${error.message}. We are experiencing some issues. Please try again later.`,\n        position: 'center',\n        timeout: 2000,\n      });\n    } finally {\n      stopLoader();\n      formReset();\n    }\n  } else {\n    iziToast.warning({\n      message: 'Field must not be empty!',\n      position: 'center',\n      timeout: 2000,\n    });\n    formReset();\n    return;\n  }\n}\n\nloadBtn.addEventListener('click', renderMoreImages);\n\nasync function renderMoreImages(event) {\n  event.preventDefault();\n  startLoader();\n  page += 1;\n  const item = document.querySelector('.item').getBoundingClientRect();\n  const response = await apiRequest(gUserRequest, page);\n  try {\n    if (page <= countOfPages) {\n      renderRequest(response.hits, gallery);\n      stopLoader();\n      window.scrollBy({\n        top: item.height * 2,\n        behavior: 'smooth',\n      });\n    } else {\n      stopLoader();\n      disableLoadBtn();\n      renderRequest(response.hits, gallery);\n      window.scrollBy({\n        top: item.height * 2,\n        behavior: 'smooth',\n      });\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'center',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `${error.message}. We are experiencing some issues. Please try again later.`,\n      position: 'center',\n      timeout: 2000,\n    });\n  }\n}\n"],"names":["axios","myApiKey","axiosOptions","key","page","apiRequest","requestKey","simpleGallery","SimpleLightbox","renderRequest","arr","link","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","img","clearGallery","gallery","userForm","loadBtn","activeLoadBtn","disableLoadBtn","gUserRequest","countOfPages","elemLoader","startLoader","stopLoader","formReset","processingUserRequest","event","userRequest","response","iziToast","error","renderMoreImages","item"],"mappings":"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"}